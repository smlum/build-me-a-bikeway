<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Build me a Bikeway</title>
    <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@^3.0.0/dist/maplibre-gl.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><text y=%221em%22 font-size=%2218%22>ðŸš´</text></svg>">

</head>
<body>
    
    <!-- Navbar -->
    <div class="navbar">
        <h1>ðŸš´ Build me a Bikeway</h1>
        <button id="auth-btn" class="auth-btn">Log In / Register</button>
    </div>

    <div id="container">
        <!-- Sidebar -->
        <div class="sidebar">
        <p>A tool to request better bike infrastructure in your area. ðŸš´</p>
        <p>Zoom and click a road on the map to retireve your local officialâ€™s contact information, and send an email using our template.</p>

        <!-- Contact Info: Hidden by default -->
        
        <div id="contact-info" style="display:none;">
            <hr>
            <h3>Contact info</h3>
            <p>
            Local mayor: 
            <a href="#" id="contact-link" target="_blank">[Official Name]</a>
            </p>
            <p>
            Email: 
            <a href="#" id="contact-email-link">[Email]</a>
            </p>
            <p>
            Phone: 
            <a href="#" id="contact-phone-link">[Phone]</a>
            </p>
        </div>

        <!-- Email Template -->
        <div id="email-template">
            <hr>
            <!-- New Copy Button -->
            <button id="copy-btn">Copy Email to Clipboard</button>

            
            <p id="email-subject">Subject: <span id="subject-content">New Bikeway Request</span></p>
            <p>Dear <span id="contact-greeting">[Official Name]</span>,</p>
            <p>
            I'm writing to bring your attention to the road segment 
            <strong><span id="road-name">[Road Name]</span>located in 
            <span id="admin-boundary">[Admin Boundary]</span></strong>.
            </p>
            <p>
            Adding a 
            <strong><span id="infrastructure-type">[Insert desired bike infrastructure type]</span></strong> on this road, would:
            </p>
            <ul>
            <li>Save me time on my daily commute</li>
            <li>Make cycling here safer</li>
            <li><span id="custom-reasons">[Add your reasons!]</span></li>
            </ul>
            <p>Thank you for your time and consideration.</p>
            <p>Sincerely,</p>
        </div>
        </div>
    </div>

    <div id="auth-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
        <span class="close-btn">&times;</span>

        <div id="logged-out-view">
    <hr>
    <h3>Register User</h3>
    <form id="registerForm">
        <label for="registerUsername">Username:</label>
        <input type="text" id="registerUsername" required><br><br>
        <label for="registerEmail">Email:</label>
        <input type="email" id="registerEmail" required><br><br>
        <label for="registerPassword">Password:</label>
        <input type="password" id="registerPassword" required><br><br>
        <button type="submit">Register</button>
    </form>

    <hr>
    <h3>Log In</h3>
    <form id="loginForm">
        <label for="loginUsername">Username:</label>
        <input type="text" id="loginUsername" required><br><br>
        <label for="loginPassword">Password:</label>
        <input type="password" id="loginPassword" required><br><br>
        <button type="submit">Log In</button>
    </form>

    <a href="#" id="forgotPasswordLink">Forgot Password?</a>
    <br><br>

    <div id="forgotPasswordView" style="display:none;">
        <hr>
        <h3>Forgot Password</h3>
        <form id="forgotPasswordForm">
            <label for="forgotEmail">Email:</label>
            <input type="email" id="forgotEmail" required><br><br>
            <button type="submit">Send Reset Link</button>
            <br>
            <a href="#" id="backToLoginLink">Back to Log In</a>
        </form>
    </div>
</div>

        <div id="logged-in-view" style="display:none;">
            <p>Welcome, <strong id="current-username">User!</strong></p>
            <hr>
            <button id="protectedButton">Access Profile</button>
            <br><br>
            <button id="logoutButton">Log Out</button>
        </div>

    </div>
</div>

    <!-- Map -->
    <div id="map-container">
        <div id="map"></div>
        <div id="info-box" class="info-box">Click on a road to see its ID</div>
        <!-- Legend Container -->
    </div>

    <div class="legend" id="legend">
        <h4>Bike Lane Types</h4>
    </div>

    <script src="https://unpkg.com/maplibre-gl@^3.0.0/dist/maplibre-gl.js"></script>
    <script src="https://unpkg.com/@turf/turf@6/turf.min.js"></script>
    <script src="node_modules/axios/dist/axios.min.js"></script>
    <script src="index.js"></script> <!-- For user profiles -->
    <script src="bike-network.js"></script> <!-- Separate script for bike network -->
    <script src="find-region.js"></script>
    <script src="copy_to_clipboard.js"></script>
</body>
</html>
